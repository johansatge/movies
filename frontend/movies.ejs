<!-- http://github.com/johansatge/movies -->
<!-- This app uses the TMDb API but is not endorsed or certified by TMDb. -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Movies</title>
    <style><%- moviesStyles %></style>
    <link href="<%= assets.manifest %>" rel="manifest">
    <meta name="viewport" content="width=device-width">
    <meta name="theme-color" content="#ffcf20">
    <link rel="icon" type="image/png" href="<%= assets.favicon %>">
  </head>
  <body>
    <div class="offline-progress-overlay" data-js-offline-progress-overlay>
      <div class="offline-progress-title">Downloading</div>
      <div class="offline-progressbar">
        <div class="offline-progressbar-progress" data-js-progress-offline></div>
      </div>
      <div class="offline-progress-actions">
        <button class="offline-progress-button" data-js-cancel-offline>Cancel</button>
      </div>
    </div>
    <div class="offline-message-overlay" data-js-offline-message-overlay>
      <div class="offline-message-window">
        <span class="offline-message-icon"></span>
        <div class="offline-message-content" data-js-offline-message-content></div>
        <button class="offline-message-button" data-js-offline-message-confirm>Ok</button>
      </div>
    </div>
    <div class="topbar topbar--search">
      <a href="#" class="topbar-title topbar-title--current">
        <span class="topbar-title-count" data-js-movies-count><%= movies.length %></span> Movies
      </a>
      <a href="stats/" class="topbar-title">
        Stats
      </a>
      <a href="http://github.com/johansatge/movies" class="topbar-title">
        About
      </a>
      <label class="topbar-search">
        <input data-js-search class="topbar-search-input" placeholder="Search movie..." value="">
        <a class="topbar-search-help" href="http://github.com/johansatge/movies/#advanced-search" target="_blank" rel="noopener">Help</a>
      </label>
      <button class="topbar-search-toggle" data-js-search-toggle></button>
      <div class="topbar-offline">
        <button class="topbar-offline-button" data-js-save-offline></button>
      </div>
    </div>
    <div class="movies">
      <% movies.forEach((movie) => { %>
        <a
          class="movie"
          target="_blank"
          rel="noopener"
          href="https://www.themoviedb.org/movie/<%= movie.tmdb_id %>"
          data-js-movie
          data-js-movie-rating="<%= movie.rating %>"
          data-js-movie-title="<%= movie.title %> <%= movie.original_title %>"
          data-js-movie-director="<%= movie.director %>"
          data-js-movie-cast="<%= movie.cast.join(',') %>"
          data-js-movie-release="<%= movie.release_date.substring(0, 4) %>"
        >
          <div class="movie-bg" data-js-lazy-load data-js-lazy-load-url="<%= movie.posters['342'] %>"></div>
          <div class="movie-rating">
            â˜… <%= movie.rating %>
          </div>
          <div class="movie-title">
            <%= movie.title %>
          </div>
        </a>
      <% }) %>
    </div>
    <div class="no-results" data-js-no-results>No results</div>
    <script src="<%= assets.polyfillsScript %>"></script>
    <script src="<%= assets.moviesScript %>"></script>
    <script>
      Scripts.movies.init({
        offlineAssets : <%- JSON.stringify(offlineAssets) %>,
      })
    </script>
    <script>
      if (navigator && navigator.serviceWorker) {
        navigator.serviceWorker.register('/serviceworker.js', {scope: '/'})
      }
    </script>
  </body>
</html>
